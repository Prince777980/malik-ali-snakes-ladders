<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ù…Ø§Ù„Ùƒ ÙˆØ¹Ù„ÙŠ: Ø§Ù„Ø³Ù„Ù… ÙˆØ§Ù„Ø«Ø¹Ø¨Ø§Ù†</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            direction: rtl;
        }
        #gameCanvas {
            border: 2px solid #333;
            background-color: white;
        }
        #status {
            font-size: 18px;
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Ù„Ø¹Ø¨Ø© Ù…Ø§Ù„Ùƒ ÙˆØ¹Ù„ÙŠ</h1>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <p id="status">Ø¯ÙˆØ± Ù…Ø§Ù„Ùƒ: Ø§Ø±Ù…Ù Ø§Ù„Ø²Ù‡Ø± Ù„ØªØ¨Ø¯Ø£!</p>
    <button onclick="rollDice()">Ø±Ù…ÙŠ Ø§Ù„Ø²Ù‡Ø±</button>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gridSize = 40;
        const boardSize = 10;
        
        // Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
        let players = [
            { name: "Ù…Ø§Ù„Ùƒ", position: 1, color: "blue" },
            { name: "Ø¹Ù„ÙŠ", position: 1, color: "red" }
        ];
        let currentPlayerIndex = 0;
        
        // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø³Ù„Ø§Ù„Ù… ÙˆØ§Ù„Ø«Ø¹Ø§Ø¨ÙŠÙ†
        const ladders = {
            3: 22,
            15: 37,
            45: 67,
            28: 49
        };
        const snakes = {
            27: 5,
            40: 12,
            87: 54,
            95: 73
        };

        // Ø±Ø³Ù… Ø§Ù„Ù„ÙˆØ­Ø©
        function drawBoard() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Ø±Ø³Ù… Ø§Ù„Ø´Ø¨ÙƒØ©
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    // Ø­Ø³Ø§Ø¨ Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹
                    let num = (boardSize - row - 1) * boardSize + col + 1;
                    if (row % 2 === 1) {
                        num = (boardSize - row - 1) * boardSize + (boardSize - col);
                    }
                    
                    // Ø±Ø³Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹
                    ctx.strokeStyle = "#333";
                    ctx.strokeRect(col * gridSize, row * gridSize, gridSize, gridSize);
                    
                    // ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ù‚Ù…
                    ctx.fillStyle = "black";
                    ctx.font = "12px Arial";
                    ctx.fillText(num, col * gridSize + 15, row * gridSize + 25);
                }
            }

            // Ø±Ø³Ù… Ø§Ù„Ø³Ù„Ø§Ù„Ù…
            ctx.strokeStyle = "green";
            ctx.lineWidth = 2;
            for (let start in ladders) {
                let end = ladders[start];
                let startPos = getPosition(start);
                let endPos = getPosition(end);
                ctx.beginPath();
                ctx.moveTo(startPos.x + gridSize / 2, startPos.y + gridSize / 2);
                ctx.lineTo(endPos.x + gridSize / 2, endPos.y + gridSize / 2);
                ctx.stroke();
            }

            // Ø±Ø³Ù… Ø§Ù„Ø«Ø¹Ø§Ø¨ÙŠÙ†
            ctx.strokeStyle = "red";
            for (let start in snakes) {
                let end = snakes[start];
                let startPos = getPosition(start);
                let endPos = getPosition(end);
                ctx.beginPath();
                ctx.moveTo(startPos.x + gridSize / 2, startPos.y + gridSize / 2);
                ctx.lineTo(endPos.x + gridSize / 2, endPos.y + gridSize / 2);
                ctx.stroke();
            }

            // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            players.forEach(player => {
                let pos = getPosition(player.position);
                ctx.fillStyle = player.color;
                ctx.beginPath();
                ctx.arc(pos.x + gridSize / 2, pos.y + gridSize / 2, 10, 0, 2 * Math.PI);
                ctx.fill();
                ctx.fillStyle = "white";
                ctx.font = "10px Arial";
                ctx.fillText(player.name[0], pos.x + gridSize / 2 - 3, pos.y + gridSize / 2 + 3);
            });
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø¨Ø¹
        function getPosition(num) {
            num = parseInt(num);
            let row = Math.floor((100 - num) / boardSize);
            let col = (num - 1) % boardSize;
            if ((boardSize - row - 1) % 2 === 1) {
                col = boardSize - 1 - col;
            }
            return { x: col * gridSize, y: row * gridSize };
        }

        // Ø±Ù…ÙŠ Ø§Ù„Ø²Ù‡Ø± ÙˆØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù„Ø§Ø¹Ø¨
        function rollDice() {
            let currentPlayer = players[currentPlayerIndex];
            let dice = Math.floor(Math.random() * 6) + 1;
            currentPlayer.position += dice;

            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„ØªØ¬Ø§ÙˆØ²
            if (currentPlayer.position > 100) {
                currentPlayer.position -= dice;
                document.getElementById('status').innerText = `${currentPlayer.name}: Ø±Ù…ÙŠØª ${dice}ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ø±Ùƒ!`;
                switchPlayer();
                drawBoard();
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ù„Ø§Ù„Ù…
            if (ladders[currentPlayer.position]) {
                let newPos = ladders[currentPlayer.position];
                document.getElementById('status').innerText = `${currentPlayer.name}: Ø±Ù…ÙŠØª ${dice} ÙˆØµØ¹Ø¯Øª Ø³Ù„Ù…Ù‹Ø§ Ø¥Ù„Ù‰ ${newPos}!`;
                currentPlayer.position = newPos;
            }
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø«Ø¹Ø§Ø¨ÙŠÙ†
            else if (snakes[currentPlayer.position]) {
                let newPos = snakes[currentPlayer.position];
                document.getElementById('status').innerText = `${currentPlayer.name}: Ø±Ù…ÙŠØª ${dice} ÙˆÙ„Ø¯ØºÙƒ Ø«Ø¹Ø¨Ø§Ù† Ø¥Ù„Ù‰ ${newPos}!`;
                currentPlayer.position = newPos;
            }
            else {
                document.getElementById('status').innerText = `${currentPlayer.name}: Ø±Ù…ÙŠØª ${dice} ÙˆØªØ­Ø±ÙƒØª Ø¥Ù„Ù‰ ${currentPlayer.position}`;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙÙˆØ²
            if (currentPlayer.position === 100) {
                document.getElementById('status').innerText = `${currentPlayer.name} ÙØ§Ø² Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ‰`;
                document.querySelector('button').disabled = true;
                drawBoard();
                return;
            }

            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨
            switchPlayer();
            drawBoard();
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨
        function switchPlayer() {
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            document.getElementById('status').innerText += ` | Ø¯ÙˆØ± ${players[currentPlayerIndex].name}`;
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        drawBoard();
    </script>
</body>
</html>
